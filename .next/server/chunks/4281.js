exports.id=4281,exports.ids=[4281],exports.modules={10690:(e,s,a)=>{Promise.resolve().then(a.bind(a,71868))},71868:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(10326),r=a(17577),l=a(90434),i=a(46226),n=a(35047),c=a(25561),o=a(60982),d=a(54998),x=a(3719),m=a(7710),h=a(90216),u=a(60882),f=a(58885),g=a(19381),p=a(16041),b=a(6763),j=a(72591),N=a(17477),v=a(49634),y=a(51223),w=a(59675),D=a(61994),Z=a(30323),C=a(55137),k=a(83159);function E(){let[e,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(0),[c,o]=(0,r.useState)(!1),d=async e=>{try{await C.apiClient.put(`/notifications/${e}/read`),l(a.map(s=>s.id===e?{...s,read:!0}:s)),n(Math.max(0,i-1))}catch(e){console.error("Failed to mark as read:",e)}},x=async()=>{try{await C.apiClient.put("/notifications/mark-all-read"),l(a.map(e=>({...e,read:!0}))),n(0)}catch(e){console.error("Failed to mark all as read:",e)}},m=async e=>{try{await C.apiClient.delete(`/notifications/${e}`),l(a.filter(s=>s.id!==e)),a.find(s=>s.id===e)?.read||n(Math.max(0,i-1))}catch(e){console.error("Failed to delete notification:",e)}},h=e=>{switch(e){case"ESCROW_FUNDED":case"PAYMENT_RECEIVED":return"\uD83D\uDCB0";case"STRIPE_SETUP_REQUIRED":return"⚠️";case"MILESTONE_SUBMITTED":return"\uD83D\uDCCB";case"MILESTONE_APPROVED":return"✅";case"MILESTONE_REJECTED":return"❌";case"PAYMENT_RELEASED":return"\uD83D\uDCB5";default:return"\uD83D\uDD14"}};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>s(!e),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Notifications",children:[i>0?t.jsx(Z.Z,{className:"h-6 w-6 text-blue-600"}):t.jsx(w.Z,{className:"h-6 w-6"}),i>0&&t.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center min-w-[20px] h-5 px-1 text-xs font-bold text-white bg-red-500 rounded-full",children:i>99?"99+":i})]}),e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),i>0&&t.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"})]}),t.jsx("div",{className:"overflow-y-auto flex-1",children:c?(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-2",children:"Loading..."})]}):0===a.length?(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[t.jsx(w.Z,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"No notifications"})]}):t.jsx("div",{className:"divide-y divide-gray-100",children:a.map(e=>t.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${e.read?"":"bg-blue-50"}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 text-2xl",children:h(e.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:e.title}),t.jsx("button",{onClick:()=>m(e.id),className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 rounded",children:t.jsx(j.Z,{className:"h-4 w-4"})})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:e.message}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-gray-500",children:(0,k.Q)(new Date(e.createdAt),{addSuffix:!0})}),!e.read&&(0,t.jsxs)("button",{onClick:()=>d(e.id),className:"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[t.jsx(D.Z,{className:"h-3 w-3"}),"Mark as read"]})]})]})]})},e.id))})}),a.length>0&&t.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50 text-center",children:t.jsx("button",{onClick:()=>{s(!1)},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View all notifications"})})]})]})]})}let T=[{name:"Dashboard",href:"/business",icon:o.Z},{name:"Projects",href:"/business/projects",icon:d.Z},{name:"Applications",href:"/business/applications",icon:x.Z},{name:"Messages",href:"/business/messages",icon:m.Z},{name:"Contracts",href:"/business/contracts",icon:x.Z},{name:"Payments",href:"/business/payments",icon:h.Z}],S=[{name:"Dashboard",href:"/talent",icon:o.Z},{name:"Opportunities",href:"/talent/opportunities",icon:d.Z},{name:"Applications",href:"/talent/applications",icon:x.Z},{name:"Messages",href:"/talent/messages",icon:m.Z},{name:"Contracts",href:"/talent/contracts",icon:x.Z},{name:"Payments",href:"/talent/payments",icon:h.Z},{name:"Profile",href:"/talent/profile",icon:u.Z}],M=[{name:"Dashboard",href:"/admin",icon:o.Z},{name:"Users",href:"/admin/users",icon:u.Z},{name:"Projects",href:"/admin/projects",icon:d.Z},{name:"Escrow",href:"/admin/escrow",icon:f.Z},{name:"Disputes",href:"/admin/disputes",icon:g.Z},{name:"Analytics",href:"/admin/analytics",icon:p.Z},{name:"Payments",href:"/admin/payments",icon:h.Z},{name:"Files",href:"/admin/files",icon:b.Z}];function P({children:e}){let[s,a]=(0,r.useState)(!1),{user:o,logout:d,loading:x}=(0,c.a)(),m=(0,n.usePathname)();if((0,n.useRouter)(),x)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!o)return null;let h=o?.userType?.toLowerCase(),f="business"===h?T:"admin"===h?M:S;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s&&(0,t.jsxs)("div",{className:"relative z-50 lg:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-900/80",onClick:()=>a(!1)}),t.jsx("div",{className:"fixed inset-0 flex",children:(0,t.jsxs)("div",{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[t.jsx("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:t.jsx("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>a(!1),children:t.jsx(j.Z,{className:"h-6 w-6 text-white"})})}),(0,t.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-2",children:[t.jsx("div",{className:"flex h-16 shrink-0 items-center",children:t.jsx(l.default,{href:"/",className:"flex items-center space-x-2",children:t.jsx(i.default,{className:"h-16 w-auto",src:"/logo.png",alt:"LocalTalents.ca",width:240,height:240})})}),t.jsx("nav",{className:"flex flex-1 flex-col",children:t.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:t.jsx("li",{children:t.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:f.map(e=>t.jsx("li",{children:(0,t.jsxs)(l.default,{href:e.href,className:(0,y.cn)(m===e.href?"bg-gray-50 text-blue-600":"text-gray-700 hover:text-blue-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"),children:[t.jsx(e.icon,{className:"h-6 w-6 shrink-0"}),e.name]})},e.name))})})})})]})]})})]}),t.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col",children:(0,t.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6",children:[t.jsx("div",{className:"flex h-16 shrink-0 items-center",children:t.jsx(l.default,{href:"/",className:"flex items-center space-x-2",children:t.jsx(i.default,{className:"h-16 w-auto",src:"/logo.png",alt:"LocalTalents.ca",width:240,height:240})})}),t.jsx("nav",{className:"flex flex-1 flex-col",children:(0,t.jsxs)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[t.jsx("li",{children:t.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:f.map(e=>t.jsx("li",{children:(0,t.jsxs)(l.default,{href:e.href,className:(0,y.cn)(m===e.href?"bg-gray-50 text-blue-600":"text-gray-700 hover:text-blue-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"),children:[t.jsx(e.icon,{className:"h-6 w-6 shrink-0"}),e.name]})},e.name))})}),t.jsx("li",{className:"-mx-6 mt-auto",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-4 px-6 py-3 text-sm font-semibold leading-6 text-gray-900",children:[o?.profile?.avatar?t.jsx(i.default,{src:o.profile.avatar,alt:`${o.profile.firstName} ${o.profile.lastName}`,width:32,height:32,className:"h-8 w-8 rounded-full object-cover"}):t.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-50 flex items-center justify-center",children:t.jsx(u.Z,{className:"h-5 w-5 text-gray-400"})}),t.jsx("span",{className:"sr-only",children:"Your profile"}),(0,t.jsxs)("span",{"aria-hidden":"true",children:[o?.profile?.firstName," ",o?.profile?.lastName]})]})})]})})]})}),(0,t.jsxs)("div",{className:"lg:pl-72",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[t.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>a(!0),children:t.jsx(N.Z,{className:"h-6 w-6"})}),t.jsx("div",{className:"h-6 w-px bg-gray-200 lg:hidden"}),(0,t.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[t.jsx("div",{className:"flex items-center gap-x-4 lg:gap-x-6"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6 ml-auto",children:[t.jsx(E,{}),t.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),t.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Sign out",title:"Sign out",children:t.jsx(v.Z,{className:"h-6 w-6"})})]})]})]}),t.jsx("main",{className:"py-10",children:t.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e})})]})]})}},91664:(e,s,a)=>{"use strict";a.d(s,{z:()=>o});var t=a(10326),r=a(17577),l=a(34214),i=a(79360),n=a(51223);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90",warning:"bg-warning text-white hover:bg-warning/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...i},o)=>{let d=r?l.g7:"button";return t.jsx(d,{className:(0,n.cn)(c({variant:s,size:a,className:e})),ref:o,...i})});o.displayName="Button"},51223:(e,s,a)=>{"use strict";a.d(s,{SY:()=>c,cn:()=>l,p6:()=>n,xG:()=>i});var t=a(41135),r=a(31009);function l(...e){return(0,r.m6)((0,t.W)(e))}function i(e,s="CAD"){return new Intl.NumberFormat("en-CA",{style:"currency",currency:s}).format(e)}function n(e){if(!e)return"Invalid date";let s=new Date(e);return isNaN(s.getTime())?"Invalid date":new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"long",day:"numeric"}).format(s)}function c(e){if(!e)return"Invalid date";let s=new Date,a=new Date(e);if(isNaN(a.getTime()))return"Invalid date";let t=Math.floor((s.getTime()-a.getTime())/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<2592e3?`${Math.floor(t/86400)}d ago`:n(e)}},6989:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`C:\Users\totur\OneDrive\Documents\Wennovate Consulting\Internal Projects\LocalTalents_ca\LocalTalent-app\src\app\(dashboard)\layout.tsx#default`)}};