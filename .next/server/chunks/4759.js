exports.id=4759,exports.ids=[4759],exports.modules={4948:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},32383:(e,t,s)=>{Promise.resolve().then(s.bind(s,13185))},55137:(e,t,s)=>{"use strict";s.d(t,{apiClient:()=>a});var o=s(94464);class r{constructor(){this.client=o.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4,withCredentials:!0}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("localtalents_token")||localStorage.getItem("accessToken")||localStorage.getItem("localtalents_accessToken");return console.log("\uD83D\uDD0D API Client: Request interceptor",{url:e.url,hasToken:!!t}),t?(e.headers.Authorization=`Bearer ${t}`,console.log("✅ API Client: Added Authorization header")):console.log("❌ API Client: No token found in any storage location"),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:s}=(await o.Z.post(`${this.client.defaults.baseURL}/auth/refresh`,{refreshToken:e})).data.tokens;return localStorage.setItem("token",s),t.headers.Authorization=`Bearer ${s}`,this.client(t)}}catch(t){localStorage.removeItem("token"),localStorage.removeItem("refreshToken");let e=window.location.pathname;return(e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin"))&&(window.location.href="/login"),Promise.reject(t)}}if(e.response?.status===401){let e=window.location.pathname,t=e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin");localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),t&&(window.location.href="/login")}return Promise.reject(e)})}async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,s){return(await this.client.post(e,t,s)).data}async put(e,t,s){return(await this.client.put(e,t,s)).data}async patch(e,t,s){return(await this.client.patch(e,t,s)).data}async delete(e,t){return(await this.client.delete(e,t)).data}async getBlob(e,t){return(await this.client.get(e,{...t,responseType:"blob"})).data}}let a=new r},25561:(e,t,s)=>{"use strict";s.d(t,{H:()=>u,a:()=>g});var o=s(10326),r=s(17577),a=s(35047),n=s(55137);class i{async register(e){return n.apiClient.post("/auth/register",e)}async login(e){return n.apiClient.post("/auth/login",e)}async logout(){return n.apiClient.post("/auth/logout")}async refreshTokens(){return n.apiClient.post("/auth/refresh")}async getProfile(){return n.apiClient.get("/auth/profile")}async checkAuth(){return n.apiClient.get("/auth/check")}async changePassword(e){return n.apiClient.post("/auth/change-password",e)}async forgotPassword(e){return n.apiClient.post("/auth/forgot-password",e)}async resetPassword(e){return n.apiClient.post("/auth/reset-password",e)}async verifyEmail(e){return n.apiClient.post("/auth/verify-email",{token:e})}async resendVerification(e){return n.apiClient.post("/auth/resend-verification",{email:e})}async deleteAccount(){return n.apiClient.delete("/auth/account")}}let l=new i,c=(0,r.createContext)(void 0);function u({children:e}){let[t,s]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),u=(0,a.useRouter)(),g=async(e,t,o)=>{try{let r={email:e,password:t,...o?.userType==="admin"&&{userType:"admin",adminCode:o.adminCode}},a=await l.login(r);if(o?.userType==="admin"&&"admin"!==a.user.userType)throw Error("Invalid admin credentials");if(a.tokens)try{console.log("\uD83D\uDCBE Login: Storing tokens in multiple storage locations..."),localStorage.setItem("token",a.tokens.accessToken),localStorage.setItem("refreshToken",a.tokens.refreshToken),sessionStorage.setItem("token",a.tokens.accessToken),sessionStorage.setItem("refreshToken",a.tokens.refreshToken),localStorage.setItem("localtalents_token",a.tokens.accessToken),localStorage.setItem("localtalents_refresh",a.tokens.refreshToken),console.log("✅ Login: Tokens successfully stored")}catch(e){console.error("❌ Login: Failed to store tokens:",e)}return s(a.user),{success:!0,user:a.user}}catch(e){if(e.response?.status===403&&e.response?.data?.requiresEmailVerification)return{success:!1,requiresEmailVerification:!0,message:e.response.data.message||"Please verify your email address before logging in."};return{success:!1,message:e.response?.data?.message||e.message||"Login failed"}}},h=async e=>{try{console.log("\uD83D\uDD10 Auth context: register called with:",e);let t={...e,userType:e.userType.toUpperCase()};console.log("\uD83D\uDD04 Auth context: calling authService.register with:",t);let o=await l.register(t);if(console.log("Auth service registration response:",o),o.requiresEmailVerification)return console.log("\uD83D\uDCE7 Registration requires email verification"),{success:!0,requiresEmailVerification:!0,message:o.message||"Registration successful! Please check your email to verify your account.",user:o.user};if(!o||!o.tokens||!o.tokens.accessToken)throw Error("Invalid registration response: missing tokens");if(!o.user)throw Error("Invalid registration response: missing user data");try{console.log("\uD83D\uDCBE Storing tokens in multiple storage locations..."),localStorage.setItem("token",o.tokens.accessToken),localStorage.setItem("refreshToken",o.tokens.refreshToken),sessionStorage.setItem("token",o.tokens.accessToken),sessionStorage.setItem("refreshToken",o.tokens.refreshToken),localStorage.setItem("localtalents_token",o.tokens.accessToken),localStorage.setItem("localtalents_refresh",o.tokens.refreshToken);let e=localStorage.getItem("token");localStorage.getItem("refreshToken");let t=sessionStorage.getItem("token"),s=localStorage.getItem("localtalents_token");if(console.log("\uD83D\uDD0D Token storage verification:",{localStorage:e?"SUCCESS":"FAILED",sessionStorage:t?"SUCCESS":"FAILED",prefixed:s?"SUCCESS":"FAILED"}),!e&&!t&&!s)throw Error("Failed to store tokens in any storage mechanism");console.log("✅ Tokens successfully stored and verified")}catch(e){throw console.error("❌ Failed to store tokens:",e),Error("Failed to store authentication tokens")}console.log("✅ Auth context: Tokens stored, setting user:",o.user);let r=localStorage.getItem("token"),a=localStorage.getItem("refreshToken");return console.log("\uD83D\uDD0D Stored tokens verification:",{accessToken:r?"EXISTS":"MISSING",refreshToken:a?"EXISTS":"MISSING"}),s(o.user),console.log("✅ Auth context: User set successfully:",o.user),console.log("\uD83D\uDD0D Auth context state after registration:",{user:o.user,hasTokens:!!r}),{success:!0,user:o.user,message:"Registration successful!"}}catch(e){throw console.error("Auth context registration error:",e),console.error("Auth error response:",e.response?.data),Error(e.response?.data?.message||e.response?.data?.error||e.message||"Registration failed")}},m=async()=>{try{await l.logout()}catch(e){console.error("Logout API call failed:",e)}finally{console.log("\uD83D\uDEAA Logout: Clearing all tokens and user state"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("token"),localStorage.removeItem("localtalents_accessToken"),localStorage.removeItem("localtalents_refreshToken"),sessionStorage.removeItem("token"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),s(null),console.log("✅ Logout: All tokens cleared, user state reset"),console.log("\uD83D\uDD04 Logout: Redirecting to login page"),u.push("/login")}},d=async()=>{try{let e=await l.refreshTokens();e.tokens&&(localStorage.setItem("token",e.tokens.accessToken),localStorage.setItem("refreshToken",e.tokens.refreshToken)),s(e.user)}catch(e){throw console.error("Token refresh failed:",e),await m(),e}},k=async e=>{try{let t=await l.verifyEmail(e);return t.tokens&&(localStorage.setItem("token",t.tokens.accessToken),localStorage.setItem("refreshToken",t.tokens.refreshToken),localStorage.setItem("localtalents_token",t.tokens.accessToken),localStorage.setItem("localtalents_refresh",t.tokens.refreshToken),sessionStorage.setItem("token",t.tokens.accessToken),s(t.user)),{success:!0,user:t.user,message:t.message||"Email verified successfully!"}}catch(e){return{success:!1,message:e.response?.data?.message||e.message||"Email verification failed"}}},p=async e=>{try{let t=await l.resendVerification(e);return{success:!0,message:t.message||"Verification email sent successfully!"}}catch(e){return{success:!1,message:e.response?.data?.message||e.message||"Failed to resend verification email"}}};return o.jsx(c.Provider,{value:{user:t,loading:n,login:g,register:h,logout:m,updateUser:e=>{},refreshAuth:d,verifyEmail:k,resendVerification:p},children:e})}function g(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},13185:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>c});var o=s(10326),r=s(22852),a=s(44976),n=s(17577),i=s(25561),l=s(85999);function c({children:e}){let[t]=(0,n.useState)(()=>new r.S({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return o.jsx(a.aH,{client:t,children:(0,o.jsxs)(i.H,{children:[e,o.jsx(l.x7,{position:"top-right",richColors:!0})]})})}},65161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var o=s(19510),r=s(25384),a=s.n(r);s(5023);let n=(0,s(68570).createProxy)(String.raw`C:\Users\totur\OneDrive\Documents\Wennovate Consulting\Internal Projects\LocalTalents_ca\LocalTalent-app\src\lib\providers.tsx#Providers`),i={title:"LocalTalents.ca - Find Local Niche Talent in 48 Hours",description:"Connect with verified specialists in your city. No more expensive recruitment fees or global competition. Get quality work done by local experts who can collaborate in-person.",keywords:"local talent, niche specialists, Canadian freelancers, local hiring, remote work",authors:[{name:"LocalTalents.ca"}],creator:"LocalTalents.ca",publisher:"LocalTalents.ca",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL("https://localtalents.ca"),alternates:{canonical:"/"},openGraph:{title:"LocalTalents.ca - Find Local Niche Talent in 48 Hours",description:"Connect with verified specialists in your city. Get quality work done by local experts.",url:"https://localtalents.ca",siteName:"LocalTalents.ca",images:[{url:"/og-image.png",width:1200,height:630,alt:"LocalTalents.ca - Local Niche Talent Platform"}],locale:"en_CA",type:"website"},twitter:{card:"summary_large_image",title:"LocalTalents.ca - Find Local Niche Talent in 48 Hours",description:"Connect with verified specialists in your city.",images:["/og-image.png"]},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}}};function l({children:e}){return o.jsx("html",{lang:"en",className:"h-full",children:o.jsx("body",{className:`${a().className} h-full antialiased`,children:o.jsx(n,{children:e})})})}},5023:()=>{}};