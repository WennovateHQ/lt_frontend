(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2359,6305],{85809:function(e,t,a){Promise.resolve().then(a.bind(a,25848))},25848:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(57437),r=a(17168),l=a(2265),n=a(79820),i=a(12381),o=a(69174),c=a(40279),d=a(15291),u=a(38081),h=a(41556),m=a(19672),x=a(1184),g=a(93448);function p(){let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(null),[p,j]=(0,l.useState)(!0),[v,y]=(0,l.useState)(""),[f,w]=(0,l.useState)("all"),[N,b]=(0,l.useState)("all"),[E,k]=(0,l.useState)({from:"",to:""});(0,l.useEffect)(()=>{C(),L()},[f,N,E]);let C=async()=>{try{let e={limit:50,offset:0};"all"!==f&&(e.status=f),"all"!==N&&(e.type=N),E.from&&(e.dateFrom=E.from),E.to&&(e.dateTo=E.to),console.log("Loading payments with params:",e);let a=await x.U.getPayments(e);console.log("Received payments:",a.payments.length,a),t(a.payments)}catch(e){console.error("Failed to load payments:",e),t([])}finally{j(!1)}},L=async()=>{try{let e=await x.U.getPaymentStats(E.from||void 0,E.to||void 0);r(e)}catch(e){console.error("Failed to load payment stats:",e)}},A=async e=>{try{let t=await x.U.downloadReceipt(e,"pdf"),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="receipt-".concat(e,".pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}catch(e){console.error("Failed to download receipt:",e)}},S=e=>{switch(null==e?void 0:e.toUpperCase()){case"COMPLETED":return"bg-green-100 text-green-800";case"PROCESSING":return"bg-yellow-100 text-yellow-800";case"PENDING":return"bg-blue-100 text-blue-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=e=>{switch(e){case"ESCROW_FUNDING":case"escrow_funding":return"bg-blue-100 text-blue-800";case"MILESTONE_PAYMENT":case"milestone_release":return"bg-green-100 text-green-800";case"BIWEEKLY_PAYMENT":return"bg-indigo-100 text-indigo-800";case"WITHDRAWAL":case"withdrawal":return"bg-purple-100 text-purple-800";case"REFUND":case"refund":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},I=(e||[]).filter(e=>{var t,a,s,r;return(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(s=e.project)||void 0===s?void 0:null===(a=s.title)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase()))||(null===(r=e.id)||void 0===r?void 0:r.toLowerCase().includes(v.toLowerCase()))});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6"}),"Payment History"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track all your payments, receipts, and transactions"})]}),a&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,g.xG)(a.totalVolume)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Volume"})]})}),(0,s.jsx)(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:a.totalTransactions.toLocaleString()}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Transactions"})]})}),(0,s.jsx)(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(0,g.xG)(a.averageTransaction)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Average Transaction"})]})}),(0,s.jsx)(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[(100*a.successRate).toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Success Rate"})]})})]}),(0,s.jsx)(n.Zb,{children:(0,s.jsx)(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)(c.I,{placeholder:"Search payments...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(d.Ph,{value:f,onValueChange:w,children:[(0,s.jsx)(d.i4,{children:(0,s.jsx)(d.ki,{placeholder:"Status"})}),(0,s.jsxs)(d.Bw,{children:[(0,s.jsx)(d.Ql,{value:"all",children:"All Statuses"}),(0,s.jsx)(d.Ql,{value:"COMPLETED",children:"Completed"}),(0,s.jsx)(d.Ql,{value:"PROCESSING",children:"Processing"}),(0,s.jsx)(d.Ql,{value:"PENDING",children:"Pending"}),(0,s.jsx)(d.Ql,{value:"FAILED",children:"Failed"}),(0,s.jsx)(d.Ql,{value:"CANCELLED",children:"Cancelled"})]})]}),(0,s.jsxs)(d.Ph,{value:N,onValueChange:b,children:[(0,s.jsx)(d.i4,{children:(0,s.jsx)(d.ki,{placeholder:"Type"})}),(0,s.jsxs)(d.Bw,{children:[(0,s.jsx)(d.Ql,{value:"all",children:"All Types"}),(0,s.jsx)(d.Ql,{value:"ESCROW_FUNDING",children:"Escrow Funding"}),(0,s.jsx)(d.Ql,{value:"MILESTONE_PAYMENT",children:"Milestone Payment"}),(0,s.jsx)(d.Ql,{value:"BIWEEKLY_PAYMENT",children:"Biweekly Payment"}),(0,s.jsx)(d.Ql,{value:"WITHDRAWAL",children:"Withdrawal"}),(0,s.jsx)(d.Ql,{value:"REFUND",children:"Refund"}),(0,s.jsx)(d.Ql,{value:"FEE",children:"Fee"})]})]}),(0,s.jsx)(c.I,{type:"date",placeholder:"From date",value:E.from,onChange:e=>k(t=>({...t,from:e.target.value}))}),(0,s.jsx)(c.I,{type:"date",placeholder:"To date",value:E.to,onChange:e=>k(t=>({...t,to:e.target.value}))})]})})}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Recent Transactions"})}),(0,s.jsx)(n.aY,{children:p?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===I.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(u.Z,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payments found"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No payments match your current filters."})]}):(0,s.jsx)("div",{className:"space-y-4",children:I.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.description||"Payment #".concat(e.id.slice(-8))}),(0,s.jsx)(o.C,{className:S(e.status),children:e.status}),e.type&&(0,s.jsx)(o.C,{className:P(e.type),children:e.type.replace(/_/g," ")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:["ID: ",e.id]}),e.project&&(0,s.jsxs)("span",{children:["Project: ",e.project.title]}),(0,s.jsx)("span",{children:(0,g.p6)(e.createdAt)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:(0,g.xG)(e.amount,e.currency)}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Total Amount"}),e.netAmount&&Number(e.netAmount)!==Number(e.amount)&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["(Net: ",(0,g.xG)(e.netAmount,e.currency),", Fee: ",(0,g.xG)(Number(e.amount)-Number(e.netAmount||0),e.currency),")"]}),e.processedAt&&(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Processed ",(0,g.p6)(e.processedAt)]})]}),("COMPLETED"===e.status||"completed"===e.status)&&(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>A(e.id),children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Receipt"]})]})]})},e.id))})})]})]})}var j=a(54675);function v(){return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(r.mQ,{defaultValue:"history",className:"space-y-6",children:[(0,s.jsxs)(r.dr,{children:[(0,s.jsx)(r.SP,{value:"history",children:"Payment History"}),(0,s.jsx)(r.SP,{value:"tax",children:"Tax Documents"})]}),(0,s.jsx)(r.nU,{value:"history",children:(0,s.jsx)(p,{})}),(0,s.jsx)(r.nU,{value:"tax",children:(0,s.jsx)(j.J,{})})]})})}},26305:function(e,t,a){"use strict";a.d(t,{apiClient:function(){return l}});var s=a(83464);class r{async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,a){return(await this.client.post(e,t,a)).data}async put(e,t,a){return(await this.client.put(e,t,a)).data}async patch(e,t,a){return(await this.client.patch(e,t,a)).data}async delete(e,t){return(await this.client.delete(e,t)).data}async getBlob(e,t){return(await this.client.get(e,{...t,responseType:"blob"})).data}constructor(){this.client=s.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4,withCredentials:!0}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("localtalents_token")||localStorage.getItem("accessToken")||localStorage.getItem("localtalents_accessToken");return console.log("\uD83D\uDD0D API Client: Request interceptor",{url:e.url,hasToken:!!t}),t?(e.headers.Authorization="Bearer ".concat(t),console.log("✅ API Client: Added Authorization header")):console.log("❌ API Client: No token found in any storage location"),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,a;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await s.Z.post("".concat(this.client.defaults.baseURL,"/auth/refresh"),{refreshToken:e})).data.tokens;return localStorage.setItem("token",t),r.headers.Authorization="Bearer ".concat(t),this.client(r)}}catch(t){localStorage.removeItem("token"),localStorage.removeItem("refreshToken");let e=window.location.pathname;return(e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin"))&&(window.location.href="/login"),Promise.reject(t)}}if((null===(a=e.response)||void 0===a?void 0:a.status)===401){let e=window.location.pathname,t=e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin");localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),t&&(window.location.href="/login")}return Promise.reject(e)})}}let l=new r},46217:function(e,t,a){"use strict";var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))});t.Z=r},38081:function(e,t,a){"use strict";var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))});t.Z=r},19672:function(e,t,a){"use strict";var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});t.Z=r},47842:function(e,t,a){"use strict";var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});t.Z=r},41556:function(e,t,a){"use strict";var s=a(2265);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=r}},function(e){e.O(0,[6137,3464,4690,271,7983,4200,5977,2971,2117,1744],function(){return e(e.s=85809)}),_N_E=e.O()}]);