(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{40287:function(e,s,a){Promise.resolve().then(a.bind(a,26157))},26157:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return F}});var n=a(57437),i=a(2265),t=a(45710),r=a(73635),l=a(12381),o=a(79820),c=a(69174),d=a(40279),u=a(23675),m=a(75060),p=a(47842),h=a(89681),x=a(12594),v=a(56422),j=a(41077),y=a(77165),f=a(89399),g=a(89453),N=a(20609),b=a(26305);class C{async getProfile(){return b.apiClient.get("/users/profile")}async updateProfile(e){return b.apiClient.put("/users/profile",e)}async uploadAvatar(e){let s=new FormData;return s.append("avatar",e),b.apiClient.post("/users/avatar",s,{headers:{"Content-Type":"multipart/form-data"}})}async getUser(e){return b.apiClient.get("/users/".concat(e))}async searchUsers(e){let s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&(Array.isArray(n)?n.forEach(e=>s.append(a,e.toString())):s.append(a,n.toString()))}),b.apiClient.get("/users/search?".concat(s.toString()))}async addPortfolioItem(e){return b.apiClient.post("/users/portfolio",e)}async updatePortfolioItem(e,s){return b.apiClient.put("/users/portfolio/".concat(e),s)}async deletePortfolioItem(e){return b.apiClient.delete("/users/portfolio/".concat(e))}async addEducation(e){return b.apiClient.post("/users/education",e)}async updateEducation(e,s){return b.apiClient.put("/users/education/".concat(e),s)}async deleteEducation(e){return b.apiClient.delete("/users/education/".concat(e))}async addCertification(e){return b.apiClient.post("/users/certifications",e)}async updateCertification(e,s){return b.apiClient.put("/users/certifications/".concat(e),s)}async deleteCertification(e){return b.apiClient.delete("/users/certifications/".concat(e))}async getAllUsers(e){let s=new URLSearchParams;return Object.entries(e).forEach(e=>{let[a,n]=e;null!=n&&(Array.isArray(n)?n.forEach(e=>s.append(a,e.toString())):s.append(a,n.toString()))}),b.apiClient.get("/users/admin/all?".concat(s.toString()))}async verifyUser(e){return b.apiClient.post("/users/admin/".concat(e,"/verify"))}async suspendUser(e,s){return b.apiClient.post("/users/admin/".concat(e,"/suspend"),{reason:s})}async unsuspendUser(e){return b.apiClient.post("/users/admin/".concat(e,"/unsuspend"))}}let w=new C;var S=a(14438),A=a(58569);function z(){var e,s,a,r,b,C,z,F,E,Z;let{user:D}=(0,t.a)(),[P,_]=(0,i.useState)(null),[L,I]=(0,i.useState)(!0),[T,U]=(0,i.useState)(null),[k,O]=(0,i.useState)(!1),[B,R]=(0,i.useState)({}),G=async()=>{try{var e,s,a;I(!0),U(null);let n=await w.getProfile();console.log("✅ Business Profile loaded:",n),_(n);let i=(null==n?void 0:n.profile)||{};R({firstName:(null==i?void 0:i.firstName)||"",lastName:(null==i?void 0:i.lastName)||"",companyName:(null==i?void 0:i.companyName)||"",companySize:(null==i?void 0:i.companySize)||"",industry:(null==i?void 0:i.industry)||"",bio:(null==i?void 0:i.bio)||"",phone:(null==i?void 0:i.phone)||"",website:(null==i?void 0:i.website)||"",city:(null==i?void 0:null===(e=i.location)||void 0===e?void 0:e.city)||"",province:(null==i?void 0:null===(s=i.location)||void 0===s?void 0:s.province)||"",country:(null==i?void 0:null===(a=i.location)||void 0===a?void 0:a.country)||"Canada"})}catch(e){console.error("❌ Error loading business profile:",e),U("Failed to load profile")}finally{I(!1)}},q=async()=>{try{let e=await w.updateProfile(B);console.log("✅ Business Profile updated:",e),_(e),O(!1),S.Am.success("Profile updated successfully!")}catch(e){console.error("❌ Error updating business profile:",e),S.Am.error("Failed to update profile")}},M=async e=>{try{let s=await w.uploadAvatar(e);console.log("✅ Company logo uploaded:",s),await G(),S.Am.success("Company logo updated successfully!")}catch(e){console.error("❌ Error uploading logo:",e),S.Am.error("Failed to upload company logo")}};if((0,i.useEffect)(()=>{G()},[]),L)return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{children:"Loading profile..."})]})});if(T)return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(p.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-red-600 mb-4",children:T}),(0,n.jsx)(l.z,{onClick:G,children:"Try Again"})]})});let W={firstName:(null==P?void 0:null===(e=P.profile)||void 0===e?void 0:e.firstName)||"First",lastName:(null==P?void 0:null===(s=P.profile)||void 0===s?void 0:s.lastName)||"Last",email:(null==P?void 0:P.email)||"email@example.com",companyName:(null==P?void 0:null===(a=P.profile)||void 0===a?void 0:a.companyName)||"Company Name",companySize:(null==P?void 0:null===(r=P.profile)||void 0===r?void 0:r.companySize)||"Not specified",industry:(null==P?void 0:null===(b=P.profile)||void 0===b?void 0:b.industry)||"Not specified",bio:(null==P?void 0:null===(C=P.profile)||void 0===C?void 0:C.bio)||"Company description not provided yet.",avatar:null==P?void 0:null===(z=P.profile)||void 0===z?void 0:z.avatar,phone:(null==P?void 0:null===(F=P.profile)||void 0===F?void 0:F.phone)||"",website:(null==P?void 0:null===(E=P.profile)||void 0===E?void 0:E.website)||"",location:(null==P?void 0:null===(Z=P.profile)||void 0===Z?void 0:Z.location)?"".concat(P.profile.location.city,", ").concat(P.profile.location.province):"Location not set",joinedDate:(null==P?void 0:P.createdAt)?new Date(P.createdAt).toLocaleDateString():"N/A"};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(o.Zb,{children:(0,n.jsxs)(o.aY,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,n.jsxs)("div",{className:"relative",children:[W.avatar?(0,n.jsx)("img",{src:W.avatar,alt:W.companyName,className:"w-20 h-20 rounded-lg object-cover border"}):(0,n.jsx)("div",{className:"w-20 h-20 rounded-lg bg-gray-200 flex items-center justify-center border",children:(0,n.jsx)(h.Z,{className:"h-8 w-8 text-gray-500"})}),(0,n.jsxs)("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-1 rounded-full cursor-pointer hover:bg-blue-700",children:[(0,n.jsx)(x.Z,{className:"h-3 w-3"}),(0,n.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&M(a)}})]})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:W.companyName}),(0,n.jsx)(c.C,{className:"bg-green-100 text-green-800",children:"Verified"})]}),(0,n.jsx)("p",{className:"text-lg text-gray-600 mb-2",children:W.industry}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:W.location})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:["Member since ",W.joinedDate]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),(0,n.jsxs)("span",{children:[W.companySize," employees"]})]})]})]})]}),(0,n.jsx)(l.z,{onClick:()=>O(!k),variant:k?"outline":"default",children:k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]}),k&&(0,n.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"companyName",children:"Company Name"}),(0,n.jsx)(d.I,{id:"companyName",value:B.companyName,onChange:e=>R({...B,companyName:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"industry",children:"Industry"}),(0,n.jsx)(d.I,{id:"industry",value:B.industry,onChange:e=>R({...B,industry:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"companySize",children:"Company Size"}),(0,n.jsx)(d.I,{id:"companySize",value:B.companySize,onChange:e=>R({...B,companySize:e.target.value}),placeholder:"e.g., 1-10, 11-50, 51-200"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"website",children:"Website"}),(0,n.jsx)(d.I,{id:"website",value:B.website,onChange:e=>R({...B,website:e.target.value}),placeholder:"https://company.com"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(m._,{htmlFor:"bio",children:"Company Description"}),(0,n.jsx)(u.g,{id:"bio",value:B.bio,onChange:e=>R({...B,bio:e.target.value}),rows:3,placeholder:"Tell us about your company..."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"firstName",children:"Contact First Name"}),(0,n.jsx)(d.I,{id:"firstName",value:B.firstName,onChange:e=>R({...B,firstName:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"lastName",children:"Contact Last Name"}),(0,n.jsx)(d.I,{id:"lastName",value:B.lastName,onChange:e=>R({...B,lastName:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"phone",children:"Phone"}),(0,n.jsx)(d.I,{id:"phone",value:B.phone,onChange:e=>R({...B,phone:e.target.value})})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)(m._,{htmlFor:"location",children:"Business Location"}),(0,n.jsx)(A.B,{value:B.city&&B.province?"".concat(B.city,", ").concat(B.province):"",onChange:(e,s)=>{R({...B,city:e,province:s,country:"Canada"})},placeholder:"Search for your business location...",className:"mt-1"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"This helps clients and talent find you"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,n.jsx)(l.z,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,n.jsx)(l.z,{onClick:q,children:"Save Changes"})]})]})]})}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsx)(o.ll,{children:"Company Information"})}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"About"}),(0,n.jsx)("p",{className:"text-gray-700",children:W.bio})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Company Details"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Industry:"})," ",W.industry]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Company Size:"})," ",W.companySize]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Location:"})," ",W.location]})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Contact Information"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Email:"})," ",W.email]})]}),W.phone&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Phone:"})," ",W.phone]})]}),W.website&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Website:"})," ",(0,n.jsx)("a",{href:W.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:W.website})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Member Since:"})," ",W.joinedDate]})]})]})]})]})]})})]})]})}function F(){return(0,n.jsx)(r.a,{requiredUserType:"business",children:(0,n.jsx)(z,{})})}},73635:function(e,s,a){"use strict";a.d(s,{a:function(){return l}});var n=a(57437),i=a(2265),t=a(99376),r=a(45710);function l(e){let{children:s,requiredUserType:a,fallbackPath:l="/login"}=e,{user:o,loading:c}=(0,r.a)(),d=(0,t.useRouter)();return((0,i.useEffect)(()=>{if(!c){if(!o){console.log("\uD83D\uDD12 AuthGuard: No authenticated user, redirecting to login"),d.push(l);return}if(a&&o.userType.toLowerCase()!==a.toLowerCase()){console.log("\uD83D\uDD12 AuthGuard: User type ".concat(o.userType," not authorized for ").concat(a," pages"));let e="admin"===o.userType.toLowerCase()?"/admin":"business"===o.userType.toLowerCase()?"/business":"/talent";d.push(e);return}console.log("✅ AuthGuard: User authorized",{userType:o.userType,requiredType:a})}},[o,c,a,d,l]),c)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):!o||a&&o.userType.toLowerCase()!==a.toLowerCase()?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Redirecting..."})]})}):(0,n.jsx)(n.Fragment,{children:s})}}},function(e){e.O(0,[6137,3464,4799,7366,5710,822,2971,2117,1744],function(){return e(e.s=40287)}),_N_E=e.O()}]);