(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5153,6305],{40304:function(e,t,r){Promise.resolve().then(r.bind(r,30719))},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(72972),s=r.n(n)},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},30719:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(57437),s=r(2265),a=r(99376),i=r(27648),o=r(79820),l=r(12381),c=r(69174),d=r(17168),u=r(71924),p=r(26305);function f(){var e,t;let r=(0,a.useParams)(),f=(0,a.useRouter)(),[m,g]=(0,s.useState)([]),[h,x]=(0,s.useState)(null),[v,j]=(0,s.useState)(!0),[b,y]=(0,s.useState)(null),w=r.id;(0,s.useEffect)(()=>{(async()=>{var e,t,n,s,a,i,o,l,c;try{j(!0),y(null),console.log("\uD83D\uDD0D Debug: Checking authentication..."),console.log("Token in localStorage:",localStorage.getItem("token")),console.log("Token in sessionStorage:",sessionStorage.getItem("token")),console.log("LocalTalents token:",localStorage.getItem("localtalents_token"));try{let e=await p.apiClient.get("/users/profile");console.log("Current user:",e)}catch(r){console.log("User profile error:",null===(e=r.response)||void 0===e?void 0:e.status,null===(t=r.response)||void 0===t?void 0:t.data),console.log("Full user error:",r)}console.log("\uD83D\uDD0D Fetching project and applications data...");let n=await p.apiClient.get("/projects/".concat(r.id));console.log("Project data loaded:",n),x(n);let s=await p.apiClient.get("/projects/".concat(r.id,"/applications"));console.log("Applications data loaded:",s),s&&s.applications?(console.log("Using applications from nested structure:",s.applications),g(s.applications)):Array.isArray(s)?(console.log("Using applications array directly:",s),g(s)):(console.log("No applications found, setting empty array"),g([]))}catch(e){console.error("Error fetching project applications:",e),console.error("Error details:",{message:e.message,response:null===(n=e.response)||void 0===n?void 0:n.data,status:null===(s=e.response)||void 0===s?void 0:s.status,url:null===(a=e.config)||void 0===a?void 0:a.url}),(null===(i=e.response)||void 0===i?void 0:i.status)===404?(y((null===(c=e.response)||void 0===c?void 0:null===(l=c.data)||void 0===l?void 0:l.message)||"Project not found or you do not have permission to view its applications"),console.log("\uD83D\uDEA8 Project not found - this may be due to an invalid project ID in the URL")):(null===(o=e.response)||void 0===o?void 0:o.status)===403?y("Access denied. You do not have permission to view this project's applications"):"ECONNREFUSED"===e.code?y("Cannot connect to server. Please check if the backend is running."):y("Failed to load project applications. Please try again.")}finally{j(!1)}})()},[w]);let N={all:m,pending:m.filter(e=>"PENDING"===e.status),reviewed:m.filter(e=>"REVIEWED"===e.status),accepted:m.filter(e=>"ACCEPTED"===e.status),rejected:m.filter(e=>"REJECTED"===e.status)},k=e=>{switch(e.toLowerCase()){case"pending":return"secondary";case"accepted":return"default";case"rejected":return"destructive";default:return"outline"}};return b?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-600 text-lg font-medium mb-4",children:"Error"}),(0,n.jsx)("div",{className:"text-gray-600 mb-6",children:b}),b.includes("Project not found")&&(0,n.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:(0,n.jsxs)("div",{className:"text-blue-800 text-sm",children:[(0,n.jsx)("strong",{children:"For testing:"})," Try with a valid project ID owned by current user:",(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"/business/projects/cmgbd5jor0001owtoxycox4ff/applications",className:"text-blue-600 hover:text-blue-800 underline mt-2 inline-block",children:"View project with applications →"}),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"/business/projects/cmgbd5jor0001owtoxycox4ff/applications/cmgfh155g0001owu0cvptqpp6",className:"text-blue-600 hover:text-blue-800 underline mt-1 inline-block",children:"View specific application detail →"})]})})]})})}):v?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("div",{className:"text-gray-600",children:"Loading applications..."})})})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(i.default,{href:"/business/projects/".concat(w),children:(0,n.jsxs)(l.z,{variant:"ghost",size:"sm",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Project"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Applications"}),(0,n.jsxs)("p",{className:"text-gray-600",children:[(null==h?void 0:h.title)||"Loading..."," • ",(null==h?void 0:null===(t=h.business)||void 0===t?void 0:null===(e=t.profile)||void 0===e?void 0:e.companyName)||"Your Company"]})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(i.default,{href:"/business/projects/".concat(w),children:(0,n.jsx)(l.z,{variant:"outline",children:"View Project Details"})}),(0,n.jsx)(i.default,{href:"/business/applications",children:(0,n.jsx)(l.z,{variant:"outline",children:"All Applications"})})]})]}),(0,n.jsxs)(d.mQ,{defaultValue:"all",className:"space-y-6",children:[(0,n.jsxs)(d.dr,{children:[(0,n.jsxs)(d.SP,{value:"all",children:["All (",N.all.length,")"]}),(0,n.jsxs)(d.SP,{value:"pending",children:["Pending (",N.pending.length,")"]}),(0,n.jsxs)(d.SP,{value:"reviewed",children:["Reviewed (",N.reviewed.length,")"]}),(0,n.jsxs)(d.SP,{value:"accepted",children:["Accepted (",N.accepted.length,")"]}),(0,n.jsxs)(d.SP,{value:"rejected",children:["Rejected (",N.rejected.length,")"]})]}),["all","pending","reviewed","accepted","rejected"].map(e=>(0,n.jsx)(d.nU,{value:e,className:"space-y-4",children:0===N[e].length?(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-600",children:"all"===e?"No applications received for this project yet.":"No ".concat(e," applications found.")}),"all"===e&&(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Applications will appear here once talents start applying to your project."})]})})}):N[e].map(e=>{var t,r,s,a,i,d,u,p;return(0,n.jsxs)(o.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)(o.ll,{className:"text-lg",children:[null===(r=e.talent)||void 0===r?void 0:null===(t=r.profile)||void 0===t?void 0:t.firstName," ",null===(a=e.talent)||void 0===a?void 0:null===(s=a.profile)||void 0===s?void 0:s.lastName]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(null===(d=e.talent)||void 0===d?void 0:null===(i=d.profile)||void 0===i?void 0:i.title)||"Professional"}),(null===(p=e.talent)||void 0===p?void 0:null===(u=p.profile)||void 0===u?void 0:u.hourlyRate)&&(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Rate: $",e.talent.profile.hourlyRate,"/hour"]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)(c.C,{variant:k(e.status),children:e.status})})]})}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"Cover Letter"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-3",children:e.coverLetter})]}),(e.proposedRate||e.proposedBudget)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-sm text-gray-700",children:"hourly"===e.rateType?"Proposed Rate":"Proposed Budget"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"hourly"===e.rateType?"$".concat(e.proposedRate," per hour"):"$".concat(e.proposedBudget," total budget")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:["Applied ",new Date(e.createdAt).toLocaleDateString()]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(l.z,{size:"sm",variant:"outline",onClick:()=>f.push("/business/projects/".concat(w,"/applications/").concat(e.id)),children:"View Details"}),"PENDING"===e.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.z,{size:"sm",variant:"default",children:"Accept"}),(0,n.jsx)(l.z,{size:"sm",variant:"destructive",children:"Reject"})]})]})]})]})})]},e.id)})},e))]})]})}},69174:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(57437);r(2265);var s=r(90535),a=r(93448);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-white hover:bg-success/80",warning:"border-transparent bg-warning text-white hover:bg-warning/80"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},12381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(57437),s=r(2265),a=r(37053),i=r(90535),o=r(93448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90",warning:"bg-warning text-white hover:bg-warning/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var n=r(57437),s=r(2265),a=r(93448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},17168:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return o},nU:function(){return d}});var n=r(57437),s=r(2265),a=r(20271),i=r(93448);let o=a.fC,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});l.displayName=a.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});c.displayName=a.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});d.displayName=a.VY.displayName},26305:function(e,t,r){"use strict";r.d(t,{apiClient:function(){return a}});var n=r(83464);class s{async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,r){return(await this.client.post(e,t,r)).data}async put(e,t,r){return(await this.client.put(e,t,r)).data}async patch(e,t,r){return(await this.client.patch(e,t,r)).data}async delete(e,t){return(await this.client.delete(e,t)).data}async getBlob(e,t){return(await this.client.get(e,{...t,responseType:"blob"})).data}constructor(){this.client=n.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4,withCredentials:!0}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("localtalents_token")||localStorage.getItem("accessToken")||localStorage.getItem("localtalents_accessToken");return console.log("\uD83D\uDD0D API Client: Request interceptor",{url:e.url,hasToken:!!t}),t?(e.headers.Authorization="Bearer ".concat(t),console.log("✅ API Client: Added Authorization header")):console.log("❌ API Client: No token found in any storage location"),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,r;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!s._retry){s._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await n.Z.post("".concat(this.client.defaults.baseURL,"/auth/refresh"),{refreshToken:e})).data.tokens;return localStorage.setItem("token",t),s.headers.Authorization="Bearer ".concat(t),this.client(s)}}catch(t){localStorage.removeItem("token"),localStorage.removeItem("refreshToken");let e=window.location.pathname;return(e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin"))&&(window.location.href="/login"),Promise.reject(t)}}if((null===(r=e.response)||void 0===r?void 0:r.status)===401){let e=window.location.pathname,t=e.startsWith("/business")||e.startsWith("/talent")||e.startsWith("/admin");localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),t&&(window.location.href="/login")}return Promise.reject(e)})}}let a=new s},93448:function(e,t,r){"use strict";r.d(t,{SY:function(){return l},cn:function(){return a},p6:function(){return o},xG:function(){return i}});var n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CAD";return new Intl.NumberFormat("en-CA",{style:"currency",currency:t}).format(e)}function o(e){if(!e)return"Invalid date";let t=new Date(e);return isNaN(t.getTime())?"Invalid date":new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"long",day:"numeric"}).format(t)}function l(e){if(!e)return"Invalid date";let t=new Date,r=new Date(e);if(isNaN(r.getTime()))return"Invalid date";let n=Math.floor((t.getTime()-r.getTime())/1e3);return n<60?"just now":n<3600?"".concat(Math.floor(n/60),"m ago"):n<86400?"".concat(Math.floor(n/3600),"h ago"):n<2592e3?"".concat(Math.floor(n/86400),"d ago"):o(e)}},71924:function(e,t,r){"use strict";var n=r(2265);let s=n.forwardRef(function(e,t){let{title:r,titleId:s,...a}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});t.Z=s}},function(e){e.O(0,[6137,3464,2972,4690,271,2971,2117,1744],function(){return e(e.s=40304)}),_N_E=e.O()}]);