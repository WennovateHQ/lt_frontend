(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6909],{74576:function(e,t,n){Promise.resolve().then(n.bind(n,11292))},99376:function(e,t,n){"use strict";var s=n(35475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},11292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var s=n(57437),r=n(2265),a=n(40279),i=n(69174),l=n(12381),o=n(43767);let c=r.forwardRef(function(e,t){let{title:n,titleId:s,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))});var d=n(41556),u=n(338),m=n(93448);function f(e){let{conversations:t,selectedConversationId:n,currentUserId:f,onSelectConversation:p,onArchiveConversation:h,onDeleteConversation:x,isLoading:g=!1}=e,[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)("all"),j=t.filter(e=>{let t=e.participants.find(e=>e.id!==f),n=!v||e.projectTitle.toLowerCase().includes(v.toLowerCase())||(null==t?void 0:t.name.toLowerCase().includes(v.toLowerCase())),s="all"===b||"unread"===b&&e.unreadCount>0;return n&&s}).sort((e,t)=>{var n,s;let r=(null===(n=e.lastMessage)||void 0===n?void 0:n.sentAt)||e.updatedAt;return((null===(s=t.lastMessage)||void 0===s?void 0:s.sentAt)||t.updatedAt).getTime()-r.getTime()}),N=t.reduce((e,t)=>e+t.unreadCount,0);return g?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"h-full flex flex-col bg-white border-r border-gray-200",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Messages",N>0&&(0,s.jsx)(i.C,{className:"ml-2 bg-red-500",children:N})]}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",children:(0,s.jsx)(c,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,s.jsx)(a.I,{placeholder:"Search conversations...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]}),(0,s.jsx)("div",{className:"flex space-x-1 mt-3",children:[{key:"all",label:"All",count:t.length},{key:"unread",label:"Unread",count:t.filter(e=>e.unreadCount>0).length}].map(e=>(0,s.jsxs)("button",{onClick:()=>w(e.key),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(b===e.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[e.label,e.count>0&&(0,s.jsxs)("span",{className:"ml-1 text-xs",children:["(",e.count,")"]})]},e.key))})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===j.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,s.jsx)(o.Z,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No conversations"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:v?"No conversations match your search.":"Start a conversation by applying to a project or posting one."})]}):(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:j.map(e=>{var t;let r=e.participants.find(e=>e.id!==f),a=e.id===n,l=(null===(t=e.lastMessage)||void 0===t?void 0:t.sentAt)||e.updatedAt;return(0,s.jsx)("div",{onClick:()=>p(e),className:"p-4 cursor-pointer transition-colors hover:bg-gray-50 ".concat(a?"bg-blue-50 border-r-2 border-blue-500":""),children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(null==r?void 0:r.avatar)?(0,s.jsx)("img",{src:r.avatar,alt:r.name,className:"w-12 h-12 rounded-full"}):(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"h-6 w-6 text-gray-400"})}),(null==r?void 0:r.isOnline)&&(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h4",{className:"text-sm font-medium truncate ".concat(e.unreadCount>0?"text-gray-900":"text-gray-700"),children:null==r?void 0:r.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:(0,m.SY)(l)}),e.unreadCount>0&&(0,s.jsx)(i.C,{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 min-w-[1.25rem] h-5 flex items-center justify-center",children:e.unreadCount>99?"99+":e.unreadCount})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2 truncate",children:e.projectTitle}),e.lastMessage&&(0,s.jsxs)("p",{className:"text-sm truncate ".concat(e.unreadCount>0?"font-medium text-gray-900":"text-gray-600"),children:[e.lastMessage.senderId===f&&(0,s.jsx)("span",{className:"text-gray-400",children:"You: "}),"file"===e.lastMessage.messageType?"\uD83D\uDCCE Attachment":e.lastMessage.content]})]})]})},e.id)})})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:[t.length," conversation",1!==t.length?"s":""]}),N>0&&(0,s.jsxs)("span",{children:[N," unread"]})]})})]})}var p=n(23675),h=n(87233),x=n(19967),g=n(19672),v=n(77165),y=n(69613);let b=r.forwardRef(function(e,t){let{title:n,titleId:s,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))});var w=n(67442);function j(e){let{conversation:t,messages:n,currentUserId:a,currentUserType:i,onSendMessage:o,onMarkAsRead:d,onTyping:u,isLoading:f=!1}=e,[j,N]=(0,r.useState)(""),[T,A]=(0,r.useState)([]),[k,I]=(0,r.useState)(!1),[C,D]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),[L,R]=(0,r.useState)(null),M=(0,r.useRef)(null),S=(0,r.useRef)(null),O=(0,r.useRef)(null),W=(0,r.useRef)();(0,r.useEffect)(()=>{var e;null===(e=M.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]),(0,r.useEffect)(()=>{let e=n.filter(e=>e.senderId!==a&&!e.readAt).map(e=>e.id);e.length>0&&d(e)},[n,a,d]);let V=e=>{N(e),C||(D(!0),null==u||u(!0)),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{D(!1),null==u||u(!1)},1e3)},z=async()=>{if(j.trim()||0!==T.length)try{var e;I(!0),await o(j.trim(),T),N(""),A([]),R(null),null===(e=O.current)||void 0===e||e.focus()}catch(e){console.error("Failed to send message:",e)}finally{I(!1)}},P=e=>{A(t=>t.filter((t,n)=>n!==e))},B=e=>e.senderId!==a?null:e.readAt?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-blue-500 -mr-2"}),(0,s.jsx)(h.Z,{className:"h-4 w-4 text-blue-500"})]}):(0,s.jsx)(h.Z,{className:"h-4 w-4 text-gray-400"}),F=t.participants.find(e=>e.id!==a);return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,s.jsx)("div",{className:"border-b border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(null==F?void 0:F.avatar)?(0,s.jsx)("img",{src:F.avatar,alt:F.name,className:"w-10 h-10 rounded-full"}):(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600",children:null==F?void 0:F.name.charAt(0)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:null==F?void 0:F.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{children:t.projectTitle}),(null==F?void 0:F.isOnline)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsx)("span",{children:"Online"})]})]})]})]})]}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",children:(0,s.jsx)(c,{className:"h-4 w-4"})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:f?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):(0,s.jsxs)(s.Fragment,{children:[n.map((e,t)=>{let r=e.senderId===a,i=0===t||n[t-1].senderId!==e.senderId;return"system"===e.messageType?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full",children:e.content})},e.id):(0,s.jsx)("div",{className:"flex ".concat(r?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex space-x-2 max-w-xs lg:max-w-md ".concat(r?"flex-row-reverse space-x-reverse":""),children:[i&&!r&&(0,s.jsx)("div",{className:"flex-shrink-0",children:e.senderAvatar?(0,s.jsx)("img",{src:e.senderAvatar,alt:e.senderName,className:"w-8 h-8 rounded-full"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600",children:e.senderName.charAt(0)})})}),(0,s.jsxs)("div",{className:"flex flex-col ".concat(r?"items-end":"items-start"),children:[L&&e.replyToId===L.id&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mb-1 px-3",children:["Replying to: ",L.content.substring(0,50),"..."]}),(0,s.jsxs)("div",{className:"rounded-lg px-3 py-2 ".concat(r?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.attachments&&e.attachments.length>0&&(0,s.jsx)("div",{className:"mt-2 space-y-1",children:e.attachments.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded",children:[e.fileType.startsWith("image/")?(0,s.jsx)(x.Z,{className:"h-4 w-4"}):(0,s.jsx)(g.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-xs",children:e.fileName})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-1 text-xs text-gray-500 ".concat(r?"flex-row-reverse space-x-reverse":""),children:[(0,s.jsx)("span",{children:(0,m.SY)(e.sentAt)}),r&&B(e),e.editedAt&&(0,s.jsx)("span",{className:"italic",children:"(edited)"})]})]})]})},e.id)}),C&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg px-3 py-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[null==F?void 0:F.name," is typing..."]})]})}),(0,s.jsx)("div",{ref:M})]})}),L&&(0,s.jsx)("div",{className:"border-t border-gray-200 p-2 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-1 h-8 bg-blue-500 rounded"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Replying to ",L.senderName]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 truncate max-w-xs",children:L.content})]})]}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>R(null),children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})})]})}),T.length>0&&(0,s.jsx)("div",{className:"border-t border-gray-200 p-2 bg-gray-50",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:T.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-white rounded px-2 py-1 text-sm",children:[e.type.startsWith("image/")?(0,s.jsx)(x.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"truncate max-w-xs",children:e.name}),(0,s.jsx)("button",{onClick:()=>P(t),className:"text-gray-400 hover:text-red-500",children:(0,s.jsx)(v.Z,{className:"h-3 w-3"})})]},t))})}),(0,s.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("input",{ref:S,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",onChange:e=>{let t=Array.from(e.target.files||[]).filter(e=>["image/jpeg","image/png","image/gif","application/pdf","application/msword","text/plain"].includes(e.type)?!(e.size>10485760)||(alert("File ".concat(e.name," is too large (max 10MB)")),!1):(alert("File type ".concat(e.type," is not supported")),!1));A(e=>[...e,...t])},className:"hidden"}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})}),(0,s.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>Z(!E),children:(0,s.jsx)(b,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(p.g,{ref:O,value:j,onChange:e=>V(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),z())},placeholder:"Type a message...",rows:1,className:"resize-none min-h-[40px] max-h-32"})}),(0,s.jsx)(l.z,{onClick:z,disabled:!j.trim()&&0===T.length||k,size:"sm",children:k?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,s.jsx)(w.Z,{className:"h-4 w-4"})})]})})]})}var N=n(45710);let T=[{id:"conv-1",projectId:"proj-1",projectTitle:"E-commerce Website Development",participants:[{id:"business-1",name:"Vancouver Retail Co.",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face",type:"business",isOnline:!0},{id:"talent-1",name:"Alex Chen",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",type:"talent",isOnline:!1,lastSeen:new Date("2024-01-20T14:30:00")}],lastMessage:{id:"msg-5",conversationId:"conv-1",senderId:"business-1",senderName:"Vancouver Retail Co.",senderType:"business",content:"Great! Let's schedule a call to discuss the project requirements in detail.",sentAt:new Date("2024-01-20T15:45:00"),messageType:"text"},unreadCount:2,createdAt:new Date("2024-01-18T10:30:00"),updatedAt:new Date("2024-01-20T15:45:00")},{id:"conv-2",projectId:"proj-2",projectTitle:"Mobile App UI/UX Design",participants:[{id:"business-2",name:"FitTech Solutions",avatar:"https://images.unsplash.com/photo-1549923746-c502d488b3ea?w=100&h=100&fit=crop&crop=face",type:"business",isOnline:!1,lastSeen:new Date("2024-01-19T16:20:00")},{id:"talent-1",name:"Alex Chen",type:"talent",isOnline:!0}],lastMessage:{id:"msg-8",conversationId:"conv-2",senderId:"talent-1",senderName:"Alex Chen",senderType:"talent",content:"I've uploaded the initial wireframes for your review. Please let me know your thoughts!",sentAt:new Date("2024-01-19T16:20:00"),messageType:"text"},unreadCount:0,createdAt:new Date("2024-01-17T14:15:00"),updatedAt:new Date("2024-01-19T16:20:00")},{id:"conv-3",projectId:"proj-3",projectTitle:"React Native Mobile App",participants:[{id:"business-3",name:"InnovateLab",avatar:"https://images.unsplash.com/photo-1572021335469-31706a17aaef?w=100&h=100&fit=crop&crop=face",type:"business",isOnline:!0},{id:"talent-1",name:"Alex Chen",type:"talent",isOnline:!0}],lastMessage:{id:"msg-12",conversationId:"conv-3",senderId:"business-3",senderName:"InnovateLab",senderType:"business",content:"The interview went great! We'd like to move forward with your proposal.",sentAt:new Date("2024-01-21T11:15:00"),messageType:"text"},unreadCount:1,createdAt:new Date("2024-01-16T09:00:00"),updatedAt:new Date("2024-01-21T11:15:00")}],A={"conv-1":[{id:"msg-1",conversationId:"conv-1",senderId:"business-1",senderName:"Vancouver Retail Co.",senderAvatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"Hi Alex! I reviewed your application for our e-commerce project and I'm impressed with your portfolio.",sentAt:new Date("2024-01-18T11:00:00"),readAt:new Date("2024-01-18T11:05:00"),messageType:"text"},{id:"msg-2",conversationId:"conv-1",senderId:"talent-1",senderName:"Alex Chen",senderAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",senderType:"talent",content:"Thank you! I'm excited about the opportunity to work on your e-commerce platform. I have extensive experience with similar projects in the Vancouver area.",sentAt:new Date("2024-01-18T11:15:00"),readAt:new Date("2024-01-18T11:20:00"),messageType:"text"},{id:"msg-3",conversationId:"conv-1",senderId:"business-1",senderName:"Vancouver Retail Co.",senderAvatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"That's great to hear! I noticed you mentioned experience with Stripe integration. Can you tell me more about your approach to payment processing?",sentAt:new Date("2024-01-18T14:30:00"),readAt:new Date("2024-01-18T14:45:00"),messageType:"text"},{id:"msg-4",conversationId:"conv-1",senderId:"talent-1",senderName:"Alex Chen",senderAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",senderType:"talent",content:"Absolutely! I typically implement Stripe Connect for marketplace-style platforms, which allows for secure payment processing with proper fee handling. I also ensure PCI compliance and implement proper error handling for failed transactions.\n\nFor your retail business, I would recommend setting up webhooks for inventory management and automated receipt generation.",sentAt:new Date("2024-01-20T09:15:00"),readAt:new Date("2024-01-20T09:30:00"),messageType:"text"},{id:"msg-5",conversationId:"conv-1",senderId:"business-1",senderName:"Vancouver Retail Co.",senderAvatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"Great! Let's schedule a call to discuss the project requirements in detail.",sentAt:new Date("2024-01-20T15:45:00"),messageType:"text"}],"conv-2":[{id:"msg-6",conversationId:"conv-2",senderId:"business-2",senderName:"FitTech Solutions",senderAvatar:"https://images.unsplash.com/photo-1549923746-c502d488b3ea?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"Hi Alex, we'd like to move forward with your application for the fitness app UI/UX design.",sentAt:new Date("2024-01-17T15:00:00"),readAt:new Date("2024-01-17T15:10:00"),messageType:"text"},{id:"msg-7",conversationId:"conv-2",senderId:"talent-1",senderName:"Alex Chen",senderType:"talent",content:"Fantastic! I'm excited to work on this project. When would be a good time to discuss the design requirements and user personas?",sentAt:new Date("2024-01-17T15:30:00"),readAt:new Date("2024-01-17T15:35:00"),messageType:"text"},{id:"msg-8",conversationId:"conv-2",senderId:"talent-1",senderName:"Alex Chen",senderType:"talent",content:"I've uploaded the initial wireframes for your review. Please let me know your thoughts!",sentAt:new Date("2024-01-19T16:20:00"),readAt:new Date("2024-01-19T16:25:00"),messageType:"text"}],"conv-3":[{id:"msg-9",conversationId:"conv-3",senderId:"business-3",senderName:"InnovateLab",senderAvatar:"https://images.unsplash.com/photo-1572021335469-31706a17aaef?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"Hello Alex! Your React Native experience looks impressive. We'd like to schedule an interview.",sentAt:new Date("2024-01-16T10:00:00"),readAt:new Date("2024-01-16T10:15:00"),messageType:"text"},{id:"msg-10",conversationId:"conv-3",senderId:"talent-1",senderName:"Alex Chen",senderType:"talent",content:"Thank you for the opportunity! I'm available this week for an interview. What time works best for you?",sentAt:new Date("2024-01-16T10:30:00"),readAt:new Date("2024-01-16T10:35:00"),messageType:"text"},{id:"msg-11",conversationId:"conv-3",senderId:"business-3",senderName:"InnovateLab",senderAvatar:"https://images.unsplash.com/photo-1572021335469-31706a17aaef?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"How about Thursday at 2 PM? We can do a video call to discuss the technical requirements.",sentAt:new Date("2024-01-16T14:20:00"),readAt:new Date("2024-01-16T14:25:00"),messageType:"text"},{id:"msg-12",conversationId:"conv-3",senderId:"business-3",senderName:"InnovateLab",senderAvatar:"https://images.unsplash.com/photo-1572021335469-31706a17aaef?w=100&h=100&fit=crop&crop=face",senderType:"business",content:"The interview went great! We'd like to move forward with your proposal.",sentAt:new Date("2024-01-21T11:15:00"),messageType:"text"}]};function k(){let{user:e}=(0,N.a)(),[t,n]=(0,r.useState)(null),[a,i]=(0,r.useState)(T),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(u(!0),setTimeout(()=>{c(A[t.id]||[]),u(!1)},500))},[t]);let m=async(n,s)=>{var r,a,l,o;if(!t||!e)return;let d={id:"msg-".concat(Date.now()),conversationId:t.id,senderId:e.id,senderName:(null===(r=e.profile)||void 0===r?void 0:r.displayName)||"".concat(null===(a=e.profile)||void 0===a?void 0:a.firstName," ").concat(null===(l=e.profile)||void 0===l?void 0:l.lastName)||e.email,senderAvatar:null===(o=e.profile)||void 0===o?void 0:o.avatar,senderType:"admin"===e.userType?"business":e.userType,content:n,sentAt:new Date,messageType:s&&s.length>0?"file":"text",attachments:null==s?void 0:s.map((e,t)=>({id:"att-".concat(Date.now(),"-").concat(t),fileName:e.name,fileSize:e.size,fileType:e.type,url:URL.createObjectURL(e)}))};c(e=>[...e,d]),i(e=>e.map(e=>e.id===t.id?{...e,lastMessage:d,updatedAt:new Date}:e)),console.log("Sending message:",d)};return e?(0,s.jsxs)("div",{className:"h-screen flex",children:[(0,s.jsx)("div",{className:"w-80 flex-shrink-0",children:(0,s.jsx)(f,{conversations:a,selectedConversationId:null==t?void 0:t.id,currentUserId:e.id,onSelectConversation:e=>{n(e),e.unreadCount>0&&i(t=>t.map(t=>t.id===e.id?{...t,unreadCount:0}:t))},isLoading:!1})}),(0,s.jsx)("div",{className:"flex-1",children:t?(0,s.jsx)(j,{conversation:t,messages:l,currentUserId:e.id,currentUserType:"admin"===e.userType?"business":e.userType,onSendMessage:m,onMarkAsRead:t=>{c(n=>n.map(n=>t.includes(n.id)&&n.senderId!==(null==e?void 0:e.id)?{...n,readAt:new Date}:n))},onTyping:e=>{console.log("Typing:",e)},isLoading:d}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(o.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a conversation"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Choose a conversation from the sidebar to start messaging."})]})})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Please log in"}),(0,s.jsx)("p",{className:"text-gray-500",children:"You need to be logged in to view messages."})]})})}},69174:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var s=n(57437);n(2265);var r=n(90535),a=n(93448);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-white hover:bg-success/80",warning:"border-transparent bg-warning text-white hover:bg-warning/80"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:n,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:n}),t),...r})}},12381:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var s=n(57437),r=n(2265),a=n(37053),i=n(90535),l=n(93448);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90",warning:"bg-warning text-white hover:bg-warning/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:n})),ref:t,...d})});c.displayName="Button"},40279:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var s=n(57437),r=n(2265),a=n(93448);let i=r.forwardRef((e,t)=>{let{className:n,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},23675:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var s=n(57437),r=n(2265),a=n(93448);let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})});i.displayName="Textarea"},93448:function(e,t,n){"use strict";n.d(t,{SY:function(){return o},cn:function(){return a},p6:function(){return l},xG:function(){return i}});var s=n(61994),r=n(53335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CAD";return new Intl.NumberFormat("en-CA",{style:"currency",currency:t}).format(e)}function l(e){if(!e)return"Invalid date";let t=new Date(e);return isNaN(t.getTime())?"Invalid date":new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"long",day:"numeric"}).format(t)}function o(e){if(!e)return"Invalid date";let t=new Date,n=new Date(e);if(isNaN(n.getTime()))return"Invalid date";let s=Math.floor((t.getTime()-n.getTime())/1e3);return s<60?"just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<2592e3?"".concat(Math.floor(s/86400),"d ago"):l(e)}},43767:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))});t.Z=r},87233:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))});t.Z=r},19672:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});t.Z=r},41556:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});t.Z=r},67442:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});t.Z=r},69613:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))});t.Z=r},19967:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});t.Z=r},338:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))});t.Z=r},77165:function(e,t,n){"use strict";var s=n(2265);let r=s.forwardRef(function(e,t){let{title:n,titleId:r,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=r},98575:function(e,t,n){"use strict";n.d(t,{F:function(){return a},e:function(){return i}});var s=n(2265);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let n=!1,s=e.map(e=>{let s=r(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){let n=s[t];"function"==typeof n?n():r(e[t],null)}}}}function i(...e){return s.useCallback(a(...e),e)}},37053:function(e,t,n){"use strict";n.d(t,{Z8:function(){return i},g7:function(){return l}});var s=n(2265),r=n(98575),a=n(57437);function i(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:n,...a}=e;if(s.isValidElement(n)){let e,i;let l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,o=function(e,t){let n={...t};for(let s in t){let r=e[s],a=t[s];/^on[A-Z]/.test(s)?r&&a?n[s]=(...e)=>{let t=a(...e);return r(...e),t}:r&&(n[s]=r):"style"===s?n[s]={...r,...a}:"className"===s&&(n[s]=[r,a].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==s.Fragment&&(o.ref=t?(0,r.F)(t,l):l),s.cloneElement(n,o)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=s.forwardRef((e,n)=>{let{children:r,...i}=e,l=s.Children.toArray(r),o=l.find(c);if(o){let e=o.props.children,r=l.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,a.jsx)(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var l=i("Slot"),o=Symbol("radix.slottable");function c(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},90535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var s=n(61994);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.W,i=(e,t)=>n=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],s=null==l?void 0:l[e];if(null===t)return null;let a=r(t)||r(s);return i[e][a]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{});return a(e,o,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...l,...c}[t]):({...l,...c})[t]===n})?[...e,n,s]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[6137,3464,5710,2971,2117,1744],function(){return e(e.s=74576)}),_N_E=e.O()}]);