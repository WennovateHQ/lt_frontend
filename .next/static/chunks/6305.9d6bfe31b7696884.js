"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6305],{26305:function(t,e,a){a.d(e,{apiClient:function(){return r}});var o=a(83464);class n{async get(t,e){return(await this.client.get(t,e)).data}async post(t,e,a){return(await this.client.post(t,e,a)).data}async put(t,e,a){return(await this.client.put(t,e,a)).data}async patch(t,e,a){return(await this.client.patch(t,e,a)).data}async delete(t,e){return(await this.client.delete(t,e)).data}async getBlob(t,e){return(await this.client.get(t,{...e,responseType:"blob"})).data}constructor(){this.client=o.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4,withCredentials:!0}),this.client.interceptors.request.use(t=>{let e=localStorage.getItem("token")||sessionStorage.getItem("token")||localStorage.getItem("localtalents_token")||localStorage.getItem("accessToken")||localStorage.getItem("localtalents_accessToken");return console.log("\uD83D\uDD0D API Client: Request interceptor",{url:t.url,hasToken:!!e}),e?(t.headers.Authorization="Bearer ".concat(e),console.log("✅ API Client: Added Authorization header")):console.log("❌ API Client: No token found in any storage location"),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,async t=>{var e,a;let n=t.config;if((null===(e=t.response)||void 0===e?void 0:e.status)===401&&!n._retry){n._retry=!0;try{let t=localStorage.getItem("refreshToken");if(t){let{accessToken:e}=(await o.Z.post("".concat(this.client.defaults.baseURL,"/auth/refresh"),{refreshToken:t})).data.tokens;return localStorage.setItem("token",e),n.headers.Authorization="Bearer ".concat(e),this.client(n)}}catch(e){localStorage.removeItem("token"),localStorage.removeItem("refreshToken");let t=window.location.pathname;return(t.startsWith("/business")||t.startsWith("/talent")||t.startsWith("/admin"))&&(window.location.href="/login"),Promise.reject(e)}}if((null===(a=t.response)||void 0===a?void 0:a.status)===401){let t=window.location.pathname,e=t.startsWith("/business")||t.startsWith("/talent")||t.startsWith("/admin");localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),e&&(window.location.href="/login")}return Promise.reject(t)})}}let r=new n}}]);